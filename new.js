var LRU=function(e){"use strict";const{now:t}=Date,{defineProperties:r}=Object,{iterator:i}=Symbol;class s extends Map{constructor(e){const t="number"==typeof e,i=(t?e:e.max||e.maxSize)||1/0,s=t?0:e.maxAge||0;r(super(),{_dropExpired:{value:this._dropExpired.bind(this)},_timer:{writable:!0,value:0},_count:{writable:!0,value:0},_max:{value:i},_maxAge:{value:s}})}get(e){const r=super.get(e);if(void 0!==r)return r.time=t(),r.value}set(e,r){const{_max:i,_maxAge:s}=this,o=0!==s;return this.size!==i||this.has(e)||(o&&this._dropExpired(),o&&this.size!==i||this._dropCount()),o&&(clearTimeout(this._timer),this._timer=setTimeout(this._dropExpired,s+1)),super.set(e,{count:this._count++,time:t(),value:r})}forEach(e,t){return super.forEach(({value:r},i)=>e.call(t,r,i,this))}peek(e){const t=super.get(e);if(void 0!==t)return t.value}*entries(){yield*this[i]()}*values(){for(const[e,{value:t}]of super[i]())yield t}*[i](){for(const[e,{value:t}]of super[i]())yield[e,t]}_dropCount(){const e=[...super[i]()],[[t]]=e.sort(([e,t],[r,i])=>{const s=t.time===i.time?"count":"time";return t[s]-i[s]});this.delete(t)}_dropExpired(){const e=t()-this._maxAge;super.forEach(({time:t},r)=>{t<e&&this.delete(r)})}}return e.default=s,e}({}).default;
